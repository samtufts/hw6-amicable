<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Amicable Numbers</title>
        <link rel="stylesheet" href="style.css">

    </head>
    
    <body>
        
    <h1 style="text-align: center">Amicable Numbers</h1>
    
    <script language="javascript">
    

    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //  
          
        function showFactors(factors_array, id) {

            console.log("inside showFactors function");
            
            document.getElementById("show-control").style.opacity = "1";
            
            to_print = "[ ";
            
            for (i = 0; i < factors_array.length; i++) {
                to_print += factors_array[i] + " ";
            }
            
            console.log(to_print + "]");
            document.getElementById(id).innerHTML = to_print + " ]";
            
            
        }
        
    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
             
        function addFactors(array) {
            
            console.log("inside addFactors function");
            console.log(typeof array);
            
            var sum = 0;
            
            for (i = 0; i < array.length; i++) {
                
                sum += array[i];
                
            }
            
            return sum;
        }
        
        
        
    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //  
    
        function totalsumFactors(first, second) {
            
            //test addFactors
            // test_addFact = [1,2,3,4]
            // alert("test add factors, expect 10: " + addFactors(test_addFact));
            
            
            sum = addFactors(first)  +
                  addFactors(second) - 
                  first_number       -
                  second_number;
            
            if (sum == (first_number + second_number)) {
            
                document.getElementById("result").innerHTML =
                "The numbers are amicable";
            
            }else{
                document.getElementById("result").innerHTML =
                "The numbers are not amicable";
            }
        }

        
        
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //  
        //purpose:      gets the number entered by the user in a field.
        //arguments:    id of element as a string.
        
        function getNumbers(id) {

            console.log("inside getNumbers function");
            
            return parseInt(document.getElementById(id).value);
    
        }
    
    
        
    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * // 
     
        function findFactors(number) {
            
            console.log('inside findFactors function');
            
            //test getFactors
            // alert("test getFactors on 10, expect 1,2,5,10: " + getFactors(10));
            
            x = getFactors(number);
            console.log("number factors: " + x);
            return x;
    
        }
        
    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //  
           
        function getFactors(number) {
            
            console.log("inside getFactors function");
            
            array = [];
            
            //Test code:
            x = isFactor(10, 2);
            console.log("Test isFactor: does 2 divide 10:" + x); //returns true
            
            for (i = 0; i <= number; i++) {
                
                if (isFactor(number, i)) {
                    array.push(i);
                }
            }
            
            return array;
        }
        
    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //        

        function isFactor(number, potential_factor) {
            
            
            
            console.log('in isFactor function');
            
            if(number % potential_factor == 0) {
                
                return true;
                
            }else{
                
                return false;
                
            }
        
        }    
         
    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //        

        function showNumbers(){
            
            console.log('in showNumbers function');
            
            first_number = getNumbers("first-number");
            
            second_number = getNumbers("second-number");
            
            document.getElementById("amicable-numbers").innerHTML = 
            "The two numbers you entered are: " + 
            first_number + 
            " and " + 
            second_number;
            
            //Tests showFactors
            // test_factors = [1, 2, 3, 4];
            // showFactors(test_factors, "test")
            
            first_number_factors = findFactors(first_number);
            showFactors(first_number_factors, "first");
            
            second_number_factors = findFactors(second_number);
            showFactors(second_number_factors, "second");
            
            totalsumFactors(first_number_factors, second_number_factors);
        }    
          
        
    </script>
    
    
    <form name="numbers-form" method="post">
    
        <p>Enter a number</p>
        <input id="first-number" name="first-number" value="220">
        
        <p>Enter another number</p>
        <input id="second-number" name="second-number" value="284">
        
        <br/>
        
        <input id="button" type="button" value="Check if they are amicable" onclick="showNumbers()">

    </form>

    <div id="show-control" style="opacity: 0;">
        
        <div id="amicable-numbers">
        </div>
        
        <p>The factors of the first number are: </p>
        <div id="first">
        </div>
        
        <p>The factors of the second number are: </p>        
        <div id="second">
        </div>
        
        <div id="result">
        </div>
        
        <div id="test">
            
        </div>
        
        
    </div>
    <br><br>

    </body>
</html>